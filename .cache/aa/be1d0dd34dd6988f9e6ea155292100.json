{"id":"rxPu","dependencies":[{"name":"/Users/amane/Documents/A++/PORTFOLIO/AR/learning_ar/tensor_flow_face_api/.babelrc","includedInParent":true,"mtime":1717903731542},{"name":"/Users/amane/Documents/A++/PORTFOLIO/AR/learning_ar/tensor_flow_face_api/package.json","includedInParent":true,"mtime":1717905030198},{"name":"./shared/params","loc":{"line":18,"column":25,"index":730},"parent":"/Users/amane/Documents/A++/PORTFOLIO/AR/learning_ar/tensor_flow_face_api/src/camera.js","resolved":"/Users/amane/Documents/A++/PORTFOLIO/AR/learning_ar/tensor_flow_face_api/src/shared/params.js"},{"name":"./shared/util","loc":{"line":19,"column":36,"index":785},"parent":"/Users/amane/Documents/A++/PORTFOLIO/AR/learning_ar/tensor_flow_face_api/src/camera.js","resolved":"/Users/amane/Documents/A++/PORTFOLIO/AR/learning_ar/tensor_flow_face_api/src/shared/util.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.Camera=void 0;var e=require(\"./shared/params\"),t=require(\"./shared/util\");class i{constructor(){this.video=document.getElementById(\"video\"),this.canvas=document.getElementById(\"output\"),this.ctx=this.canvas.getContext(\"2d\")}static async setupCamera(a){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error(\"Browser API navigator.mediaDevices.getUserMedia not available\");const{targetFPS:d,sizeOption:o}=a,s=e.VIDEO_SIZE[o],r={audio:!1,video:{facingMode:\"user\",width:(0,t.isMobile)()?e.VIDEO_SIZE[\"360 X 270\"].width:s.width,height:(0,t.isMobile)()?e.VIDEO_SIZE[\"360 X 270\"].height:s.height,frameRate:{ideal:d}}},v=await navigator.mediaDevices.getUserMedia(r),h=new i;h.video.srcObject=v,await new Promise(e=>{h.video.onloadedmetadata=(()=>{e(video)})}),h.video.play();const c=h.video.videoWidth,n=h.video.videoHeight;return h.video.width=c,h.video.height=n,h.canvas.width=c,h.canvas.height=n,document.querySelector(\".canvas-wrapper\").style=`width: ${c}px; height: ${n}px`,h.ctx.translate(h.video.videoWidth,0),h.ctx.scale(-1,1),h}drawCtx(){this.ctx.drawImage(this.video,0,0,this.video.videoWidth,this.video.videoHeight)}drawResults(e,i,a){(0,t.drawResults)(this.ctx,e,i,a)}}exports.Camera=i;"},"sourceMaps":{"js":{"mappings":[{"source":"src/camera.js","original":{"line":93,"column":1},"generated":{"line":1,"column":0}},{"source":"src/camera.js","original":{"line":93,"column":1},"generated":{"line":1,"column":13}},{"source":"src/camera.js","original":{"line":93,"column":1},"generated":{"line":1,"column":20}},{"source":"src/camera.js","original":{"line":93,"column":1},"generated":{"line":1,"column":35}},{"source":"src/camera.js","original":{"line":93,"column":1},"generated":{"line":1,"column":43}},{"source":"src/camera.js","original":{"line":93,"column":1},"generated":{"line":1,"column":56}},{"source":"src/camera.js","original":{"line":93,"column":1},"generated":{"line":1,"column":57}},{"source":"src/camera.js","original":{"line":93,"column":1},"generated":{"line":1,"column":64}},{"source":"src/camera.js","original":{"line":93,"column":1},"generated":{"line":1,"column":68}},{"source":"src/camera.js","original":{"line":93,"column":1},"generated":{"line":1,"column":76}},{"source":"src/camera.js","original":{"line":93,"column":1},"generated":{"line":1,"column":88}},{"source":"src/camera.js","original":{"line":18,"column":0},"generated":{"line":1,"column":90}},{"source":"src/camera.js","name":"_params","original":{"line":18,"column":0},"generated":{"line":1,"column":94}},{"source":"src/camera.js","name":"require","original":{"line":18,"column":0},"generated":{"line":1,"column":96}},{"source":"src/camera.js","original":{"line":18,"column":0},"generated":{"line":1,"column":104}},{"source":"src/camera.js","name":"_util","original":{"line":19,"column":0},"generated":{"line":1,"column":123}},{"source":"src/camera.js","name":"require","original":{"line":19,"column":0},"generated":{"line":1,"column":125}},{"source":"src/camera.js","original":{"line":19,"column":0},"generated":{"line":1,"column":133}},{"source":"src/camera.js","original":{"line":21,"column":7},"generated":{"line":1,"column":150}},{"source":"src/camera.js","name":"Camera","original":{"line":21,"column":13},"generated":{"line":1,"column":156}},{"source":"src/camera.js","name":"constructor","original":{"line":22,"column":2},"generated":{"line":1,"column":158}},{"source":"src/camera.js","original":{"line":23,"column":4},"generated":{"line":1,"column":172}},{"source":"src/camera.js","name":"video","original":{"line":23,"column":9},"generated":{"line":1,"column":177}},{"source":"src/camera.js","name":"document","original":{"line":23,"column":17},"generated":{"line":1,"column":183}},{"source":"src/camera.js","name":"getElementById","original":{"line":23,"column":26},"generated":{"line":1,"column":192}},{"source":"src/camera.js","original":{"line":23,"column":41},"generated":{"line":1,"column":207}},{"source":"src/camera.js","original":{"line":24,"column":4},"generated":{"line":1,"column":216}},{"source":"src/camera.js","name":"canvas","original":{"line":24,"column":9},"generated":{"line":1,"column":221}},{"source":"src/camera.js","name":"document","original":{"line":24,"column":18},"generated":{"line":1,"column":228}},{"source":"src/camera.js","name":"getElementById","original":{"line":24,"column":27},"generated":{"line":1,"column":237}},{"source":"src/camera.js","original":{"line":24,"column":42},"generated":{"line":1,"column":252}},{"source":"src/camera.js","original":{"line":25,"column":4},"generated":{"line":1,"column":262}},{"source":"src/camera.js","name":"ctx","original":{"line":25,"column":9},"generated":{"line":1,"column":267}},{"source":"src/camera.js","original":{"line":25,"column":15},"generated":{"line":1,"column":271}},{"source":"src/camera.js","name":"canvas","original":{"line":25,"column":20},"generated":{"line":1,"column":276}},{"source":"src/camera.js","name":"getContext","original":{"line":25,"column":27},"generated":{"line":1,"column":283}},{"source":"src/camera.js","original":{"line":25,"column":38},"generated":{"line":1,"column":294}},{"source":"src/camera.js","original":{"line":32,"column":2},"generated":{"line":1,"column":300}},{"source":"src/camera.js","name":"cameraParam","original":{"line":32,"column":27},"generated":{"line":1,"column":325}},{"source":"src/camera.js","original":{"line":33,"column":4},"generated":{"line":1,"column":328}},{"source":"src/camera.js","name":"navigator","original":{"line":33,"column":9},"generated":{"line":1,"column":332}},{"source":"src/camera.js","name":"mediaDevices","original":{"line":33,"column":19},"generated":{"line":1,"column":342}},{"source":"src/camera.js","name":"navigator","original":{"line":33,"column":36},"generated":{"line":1,"column":357}},{"source":"src/camera.js","name":"mediaDevices","original":{"line":33,"column":46},"generated":{"line":1,"column":367}},{"source":"src/camera.js","name":"getUserMedia","original":{"line":33,"column":59},"generated":{"line":1,"column":380}},{"source":"src/camera.js","original":{"line":34,"column":6},"generated":{"line":1,"column":393}},{"source":"src/camera.js","original":{"line":34,"column":12},"generated":{"line":1,"column":399}},{"source":"src/camera.js","name":"Error","original":{"line":34,"column":16},"generated":{"line":1,"column":403}},{"source":"src/camera.js","original":{"line":35,"column":10},"generated":{"line":1,"column":409}},{"source":"src/camera.js","original":{"line":38,"column":4},"generated":{"line":1,"column":474}},{"source":"src/camera.js","original":{"line":38,"column":10},"generated":{"line":1,"column":480}},{"source":"src/camera.js","name":"targetFPS","original":{"line":38,"column":11},"generated":{"line":1,"column":490}},{"source":"src/camera.js","original":{"line":38,"column":20},"generated":{"line":1,"column":492}},{"source":"src/camera.js","name":"sizeOption","original":{"line":38,"column":22},"generated":{"line":1,"column":503}},{"source":"src/camera.js","name":"cameraParam","original":{"line":38,"column":36},"generated":{"line":1,"column":506}},{"source":"src/camera.js","name":"$size","original":{"line":39,"column":10},"generated":{"line":1,"column":508}},{"source":"src/camera.js","name":"VIDEO_SIZE","original":{"line":39,"column":18},"generated":{"line":1,"column":510}},{"source":"src/camera.js","original":{"line":39,"column":28},"generated":{"line":1,"column":512}},{"source":"src/camera.js","name":"sizeOption","original":{"line":39,"column":29},"generated":{"line":1,"column":523}},{"source":"src/camera.js","name":"videoConfig","original":{"line":40,"column":10},"generated":{"line":1,"column":526}},{"source":"src/camera.js","original":{"line":40,"column":24},"generated":{"line":1,"column":528}},{"source":"src/camera.js","original":{"line":41,"column":6},"generated":{"line":1,"column":529}},{"source":"src/camera.js","original":{"line":41,"column":15},"generated":{"line":1,"column":536}},{"source":"src/camera.js","original":{"line":42,"column":6},"generated":{"line":1,"column":538}},{"source":"src/camera.js","original":{"line":42,"column":15},"generated":{"line":1,"column":544}},{"source":"src/camera.js","name":"facingMode","original":{"line":43,"column":8},"generated":{"line":1,"column":545}},{"source":"src/camera.js","original":{"line":43,"column":20},"generated":{"line":1,"column":556}},{"source":"src/camera.js","name":"width","original":{"line":46,"column":8},"generated":{"line":1,"column":563}},{"source":"src/camera.js","original":{"line":46,"column":15},"generated":{"line":1,"column":570}},{"source":"src/camera.js","name":"isMobile","original":{"line":46,"column":15},"generated":{"line":1,"column":572}},{"source":"src/camera.js","original":{"line":46,"column":23},"generated":{"line":1,"column":574}},{"source":"src/camera.js","name":"VIDEO_SIZE","original":{"line":46,"column":28},"generated":{"line":1,"column":586}},{"source":"src/camera.js","original":{"line":46,"column":38},"generated":{"line":1,"column":588}},{"source":"src/camera.js","original":{"line":46,"column":39},"generated":{"line":1,"column":599}},{"source":"src/camera.js","name":"width","original":{"line":46,"column":52},"generated":{"line":1,"column":612}},{"source":"src/camera.js","name":"$size","original":{"line":46,"column":60},"generated":{"line":1,"column":618}},{"source":"src/camera.js","name":"width","original":{"line":46,"column":66},"generated":{"line":1,"column":620}},{"source":"src/camera.js","name":"height","original":{"line":47,"column":8},"generated":{"line":1,"column":626}},{"source":"src/camera.js","original":{"line":47,"column":16},"generated":{"line":1,"column":634}},{"source":"src/camera.js","name":"isMobile","original":{"line":47,"column":16},"generated":{"line":1,"column":636}},{"source":"src/camera.js","original":{"line":47,"column":24},"generated":{"line":1,"column":638}},{"source":"src/camera.js","name":"VIDEO_SIZE","original":{"line":47,"column":29},"generated":{"line":1,"column":650}},{"source":"src/camera.js","original":{"line":47,"column":39},"generated":{"line":1,"column":652}},{"source":"src/camera.js","original":{"line":47,"column":40},"generated":{"line":1,"column":663}},{"source":"src/camera.js","name":"height","original":{"line":47,"column":53},"generated":{"line":1,"column":676}},{"source":"src/camera.js","name":"$size","original":{"line":47,"column":62},"generated":{"line":1,"column":683}},{"source":"src/camera.js","name":"height","original":{"line":47,"column":68},"generated":{"line":1,"column":685}},{"source":"src/camera.js","name":"frameRate","original":{"line":48,"column":8},"generated":{"line":1,"column":692}},{"source":"src/camera.js","original":{"line":48,"column":19},"generated":{"line":1,"column":702}},{"source":"src/camera.js","name":"ideal","original":{"line":49,"column":10},"generated":{"line":1,"column":703}},{"source":"src/camera.js","name":"targetFPS","original":{"line":49,"column":17},"generated":{"line":1,"column":709}},{"source":"src/camera.js","name":"stream","original":{"line":54,"column":10},"generated":{"line":1,"column":714}},{"source":"src/camera.js","name":"navigator","original":{"line":54,"column":25},"generated":{"line":1,"column":722}},{"source":"src/camera.js","name":"mediaDevices","original":{"line":54,"column":35},"generated":{"line":1,"column":732}},{"source":"src/camera.js","name":"getUserMedia","original":{"line":54,"column":48},"generated":{"line":1,"column":745}},{"source":"src/camera.js","name":"videoConfig","original":{"line":54,"column":61},"generated":{"line":1,"column":758}},{"source":"src/camera.js","name":"camera","original":{"line":56,"column":10},"generated":{"line":1,"column":761}},{"source":"src/camera.js","original":{"line":56,"column":19},"generated":{"line":1,"column":763}},{"source":"src/camera.js","name":"Camera","original":{"line":56,"column":23},"generated":{"line":1,"column":767}},{"source":"src/camera.js","name":"camera","original":{"line":57,"column":4},"generated":{"line":1,"column":769}},{"source":"src/camera.js","name":"video","original":{"line":57,"column":11},"generated":{"line":1,"column":771}},{"source":"src/camera.js","name":"srcObject","original":{"line":57,"column":17},"generated":{"line":1,"column":777}},{"source":"src/camera.js","name":"stream","original":{"line":57,"column":29},"generated":{"line":1,"column":787}},{"source":"src/camera.js","original":{"line":59,"column":10},"generated":{"line":1,"column":795}},{"source":"src/camera.js","name":"Promise","original":{"line":59,"column":14},"generated":{"line":1,"column":799}},{"source":"src/camera.js","name":"resolve","original":{"line":59,"column":23},"generated":{"line":1,"column":807}},{"source":"src/camera.js","name":"camera","original":{"line":60,"column":6},"generated":{"line":1,"column":811}},{"source":"src/camera.js","name":"video","original":{"line":60,"column":13},"generated":{"line":1,"column":813}},{"source":"src/camera.js","name":"onloadedmetadata","original":{"line":60,"column":19},"generated":{"line":1,"column":819}},{"source":"src/camera.js","original":{"line":60,"column":38},"generated":{"line":1,"column":836}},{"source":"src/camera.js","name":"resolve","original":{"line":61,"column":8},"generated":{"line":1,"column":842}},{"source":"src/camera.js","name":"video","original":{"line":61,"column":16},"generated":{"line":1,"column":844}},{"source":"src/camera.js","name":"camera","original":{"line":65,"column":4},"generated":{"line":1,"column":855}},{"source":"src/camera.js","name":"video","original":{"line":65,"column":11},"generated":{"line":1,"column":857}},{"source":"src/camera.js","name":"play","original":{"line":65,"column":17},"generated":{"line":1,"column":863}},{"source":"src/camera.js","original":{"line":67,"column":4},"generated":{"line":1,"column":870}},{"source":"src/camera.js","name":"videoWidth","original":{"line":67,"column":10},"generated":{"line":1,"column":876}},{"source":"src/camera.js","name":"camera","original":{"line":67,"column":23},"generated":{"line":1,"column":878}},{"source":"src/camera.js","name":"video","original":{"line":67,"column":30},"generated":{"line":1,"column":880}},{"source":"src/camera.js","name":"videoWidth","original":{"line":67,"column":36},"generated":{"line":1,"column":886}},{"source":"src/camera.js","name":"videoHeight","original":{"line":68,"column":10},"generated":{"line":1,"column":897}},{"source":"src/camera.js","name":"camera","original":{"line":68,"column":24},"generated":{"line":1,"column":899}},{"source":"src/camera.js","name":"video","original":{"line":68,"column":31},"generated":{"line":1,"column":901}},{"source":"src/camera.js","name":"videoHeight","original":{"line":68,"column":37},"generated":{"line":1,"column":907}},{"source":"src/camera.js","original":{"line":82,"column":4},"generated":{"line":1,"column":919}},{"source":"src/camera.js","name":"camera","original":{"line":70,"column":4},"generated":{"line":1,"column":926}},{"source":"src/camera.js","name":"video","original":{"line":70,"column":11},"generated":{"line":1,"column":928}},{"source":"src/camera.js","name":"width","original":{"line":70,"column":17},"generated":{"line":1,"column":934}},{"source":"src/camera.js","name":"videoWidth","original":{"line":70,"column":25},"generated":{"line":1,"column":940}},{"source":"src/camera.js","name":"camera","original":{"line":71,"column":4},"generated":{"line":1,"column":942}},{"source":"src/camera.js","name":"video","original":{"line":71,"column":11},"generated":{"line":1,"column":944}},{"source":"src/camera.js","name":"height","original":{"line":71,"column":17},"generated":{"line":1,"column":950}},{"source":"src/camera.js","name":"videoHeight","original":{"line":71,"column":26},"generated":{"line":1,"column":957}},{"source":"src/camera.js","name":"camera","original":{"line":73,"column":4},"generated":{"line":1,"column":959}},{"source":"src/camera.js","name":"canvas","original":{"line":73,"column":11},"generated":{"line":1,"column":961}},{"source":"src/camera.js","name":"width","original":{"line":73,"column":18},"generated":{"line":1,"column":968}},{"source":"src/camera.js","name":"videoWidth","original":{"line":73,"column":26},"generated":{"line":1,"column":974}},{"source":"src/camera.js","name":"camera","original":{"line":74,"column":4},"generated":{"line":1,"column":976}},{"source":"src/camera.js","name":"canvas","original":{"line":74,"column":11},"generated":{"line":1,"column":978}},{"source":"src/camera.js","name":"height","original":{"line":74,"column":18},"generated":{"line":1,"column":985}},{"source":"src/camera.js","name":"videoHeight","original":{"line":74,"column":27},"generated":{"line":1,"column":992}},{"source":"src/camera.js","name":"document","original":{"line":75,"column":28},"generated":{"line":1,"column":994}},{"source":"src/camera.js","name":"querySelector","original":{"line":75,"column":37},"generated":{"line":1,"column":1003}},{"source":"src/camera.js","original":{"line":75,"column":51},"generated":{"line":1,"column":1017}},{"source":"src/camera.js","name":"style","original":{"line":76,"column":20},"generated":{"line":1,"column":1036}},{"source":"src/camera.js","name":"videoWidth","original":{"line":76,"column":38},"generated":{"line":1,"column":1052}},{"source":"src/camera.js","name":"videoHeight","original":{"line":76,"column":63},"generated":{"line":1,"column":1068}},{"source":"src/camera.js","name":"camera","original":{"line":79,"column":4},"generated":{"line":1,"column":1074}},{"source":"src/camera.js","name":"ctx","original":{"line":79,"column":11},"generated":{"line":1,"column":1076}},{"source":"src/camera.js","name":"translate","original":{"line":79,"column":15},"generated":{"line":1,"column":1080}},{"source":"src/camera.js","name":"camera","original":{"line":79,"column":25},"generated":{"line":1,"column":1090}},{"source":"src/camera.js","name":"video","original":{"line":79,"column":32},"generated":{"line":1,"column":1092}},{"source":"src/camera.js","name":"videoWidth","original":{"line":79,"column":38},"generated":{"line":1,"column":1098}},{"source":"src/camera.js","original":{"line":79,"column":50},"generated":{"line":1,"column":1109}},{"source":"src/camera.js","name":"camera","original":{"line":80,"column":4},"generated":{"line":1,"column":1112}},{"source":"src/camera.js","name":"ctx","original":{"line":80,"column":11},"generated":{"line":1,"column":1114}},{"source":"src/camera.js","name":"scale","original":{"line":80,"column":15},"generated":{"line":1,"column":1118}},{"source":"src/camera.js","original":{"line":80,"column":22},"generated":{"line":1,"column":1125}},{"source":"src/camera.js","original":{"line":80,"column":25},"generated":{"line":1,"column":1127}},{"source":"src/camera.js","name":"camera","original":{"line":82,"column":11},"generated":{"line":1,"column":1130}},{"source":"src/camera.js","name":"drawCtx","original":{"line":85,"column":2},"generated":{"line":1,"column":1132}},{"source":"src/camera.js","original":{"line":86,"column":4},"generated":{"line":1,"column":1142}},{"source":"src/camera.js","name":"ctx","original":{"line":86,"column":9},"generated":{"line":1,"column":1147}},{"source":"src/camera.js","name":"drawImage","original":{"line":86,"column":13},"generated":{"line":1,"column":1151}},{"source":"src/camera.js","original":{"line":87,"column":8},"generated":{"line":1,"column":1161}},{"source":"src/camera.js","name":"video","original":{"line":87,"column":13},"generated":{"line":1,"column":1166}},{"source":"src/camera.js","original":{"line":87,"column":20},"generated":{"line":1,"column":1172}},{"source":"src/camera.js","original":{"line":87,"column":23},"generated":{"line":1,"column":1174}},{"source":"src/camera.js","original":{"line":87,"column":26},"generated":{"line":1,"column":1176}},{"source":"src/camera.js","name":"video","original":{"line":87,"column":31},"generated":{"line":1,"column":1181}},{"source":"src/camera.js","name":"videoWidth","original":{"line":87,"column":37},"generated":{"line":1,"column":1187}},{"source":"src/camera.js","original":{"line":87,"column":49},"generated":{"line":1,"column":1198}},{"source":"src/camera.js","name":"video","original":{"line":87,"column":54},"generated":{"line":1,"column":1203}},{"source":"src/camera.js","name":"videoHeight","original":{"line":87,"column":60},"generated":{"line":1,"column":1209}},{"source":"src/camera.js","name":"drawResults","original":{"line":90,"column":2},"generated":{"line":1,"column":1222}},{"source":"src/camera.js","name":"faces","original":{"line":90,"column":14},"generated":{"line":1,"column":1234}},{"source":"src/camera.js","name":"triangulateMesh","original":{"line":90,"column":21},"generated":{"line":1,"column":1236}},{"source":"src/camera.js","name":"boundingBox","original":{"line":90,"column":38},"generated":{"line":1,"column":1238}},{"source":"src/camera.js","original":{"line":91,"column":4},"generated":{"line":1,"column":1242}},{"source":"src/camera.js","name":"drawResults","original":{"line":91,"column":4},"generated":{"line":1,"column":1244}},{"source":"src/camera.js","original":{"line":91,"column":15},"generated":{"line":1,"column":1246}},{"source":"src/camera.js","original":{"line":91,"column":16},"generated":{"line":1,"column":1259}},{"source":"src/camera.js","name":"ctx","original":{"line":91,"column":21},"generated":{"line":1,"column":1264}},{"source":"src/camera.js","name":"faces","original":{"line":91,"column":26},"generated":{"line":1,"column":1268}},{"source":"src/camera.js","name":"triangulateMesh","original":{"line":91,"column":33},"generated":{"line":1,"column":1270}},{"source":"src/camera.js","name":"boundingBox","original":{"line":91,"column":50},"generated":{"line":1,"column":1272}},{"source":"src/camera.js","name":"exports","original":{"line":93,"column":1},"generated":{"line":1,"column":1276}},{"source":"src/camera.js","name":"Camera","original":{"line":93,"column":1},"generated":{"line":1,"column":1284}},{"source":"src/camera.js","name":"Camera","original":{"line":93,"column":1},"generated":{"line":1,"column":1291}}],"sources":{"src/camera.js":"/**\n * @license\n * Copyright 2022 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {VIDEO_SIZE} from './shared/params';\nimport {drawResults, isMobile} from './shared/util';\n\nexport class Camera {\n  constructor() {\n    this.video = document.getElementById('video');\n    this.canvas = document.getElementById('output');\n    this.ctx = this.canvas.getContext('2d');\n  }\n\n  /**\n   * Initiate a Camera instance and wait for the camera stream to be ready.\n   * @param cameraParam From app `STATE.camera`.\n   */\n  static async setupCamera(cameraParam) {\n    if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n      throw new Error(\n          'Browser API navigator.mediaDevices.getUserMedia not available');\n    }\n\n    const {targetFPS, sizeOption} = cameraParam;\n    const $size = VIDEO_SIZE[sizeOption];\n    const videoConfig = {\n      'audio': false,\n      'video': {\n        facingMode: 'user',\n        // Only setting the video to a specified size for large screen, on\n        // mobile devices accept the default size.\n        width: isMobile() ? VIDEO_SIZE['360 X 270'].width : $size.width,\n        height: isMobile() ? VIDEO_SIZE['360 X 270'].height : $size.height,\n        frameRate: {\n          ideal: targetFPS,\n        },\n      },\n    };\n\n    const stream = await navigator.mediaDevices.getUserMedia(videoConfig);\n\n    const camera = new Camera();\n    camera.video.srcObject = stream;\n\n    await new Promise((resolve) => {\n      camera.video.onloadedmetadata = () => {\n        resolve(video);\n      };\n    });\n\n    camera.video.play();\n\n    const videoWidth = camera.video.videoWidth;\n    const videoHeight = camera.video.videoHeight;\n    // Must set below two lines, otherwise video element doesn't show.\n    camera.video.width = videoWidth;\n    camera.video.height = videoHeight;\n\n    camera.canvas.width = videoWidth;\n    camera.canvas.height = videoHeight;\n    const canvasContainer = document.querySelector('.canvas-wrapper');\n    canvasContainer.style = `width: ${videoWidth}px; height: ${videoHeight}px`;\n\n    // Because the image from camera is mirrored, need to flip horizontally.\n    camera.ctx.translate(camera.video.videoWidth, 0);\n    camera.ctx.scale(-1, 1);\n\n    return camera;\n  }\n\n  drawCtx() {\n    this.ctx.drawImage(\n        this.video, 0, 0, this.video.videoWidth, this.video.videoHeight);\n  }\n\n  drawResults(faces, triangulateMesh, boundingBox) {\n    drawResults(this.ctx, faces, triangulateMesh, boundingBox);\n  }\n}"},"lineCount":null}},"error":null,"hash":"51f8e9d8abef4c1dc6b3d3d025bbd3ec","cacheData":{"env":{}}}